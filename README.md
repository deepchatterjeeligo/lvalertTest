# lvalertTest

FUNCTIONALITY

The idea is to set up a modular library which allows us to simulate data corresponding to all stages of an event's life in GraceDb. Each bit of data is generated by a different class within several modules. These classes all must have "genSchedule" methods, which generate a schedule of Actions as defined in ~/lib/schedule.py. Then, all these schedules are stitched together (Schedules know how to add themselves together) and we have an iterable list of things (with associated wait times) that we should do to simulate a full event.

Note, simulating multiple events can be sewn together by simply adding their Schedules.

Also, we may not know which GraceID will be assigned to a particular event a priori (ie: at instantiation time). Therefore, we provide a simple class that can be shared between actions associated with a single event. The class contains protected attributes that must be accessed through getters and setters. Thus, when an entry is actually created in GraceDB, the object can be updated and the information will be available to all associated actions in the future.

We also create a environment which mimics interactions with remote GraceDb and LVAlert servers but only uses local filesystem queries. This allows developers to thoroughly test their code before ever connecting it to a real server (which might ping people if something breaks). By combining the offline tools with the simulation suite, large scale tests can be carried out quickly and locally without impacting others. In particular, the LVALert tools come in several different flavors, some of which publish data to local files and some of which monitor those local files to distribute alerts either over the actual LVAlert servers or to other local processes.

--------------------------------------------------

LIBRARIES

--------------------------------------------------

EXECUTABLES

--------------------------------------------------

EXAMPLES

--------------------------------------------------
--------------------------------------------------

Note, there is a bone fide lvalert node specifically for testing purposes. Here are the pertinents:

    username : gdb_processor
    password : ***

    resource : lvalertMP-test

    node : lvalerttest-testnode

I've also written a simple script to ping this node with basic messages

    ~/bin/lvalertMP_test

and a config file with which I can run lvalert_listenMP

    ~/etc/lvalert_listenMP.ini (points to ~/etc/childConfig.ini)

as well as a config file for a more standard lvalert_listen process to confirm we heard the alerts.

    ~/etc/lvalert_listen.ini (delegates to ~/bin/confirmation.sh)

This provides a simple platform from which we can test things. However, using lvalert_commandMP is also an option.
